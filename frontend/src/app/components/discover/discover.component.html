<div class="container mt-4">
    <!-- DISCOVER THE AREA -->
    <div class="mb-3">
        <!-- Títol clicable -->
        <h3 class="d-flex align-items-center justify-content-between" (click)="toggleSection('discover')" role="button">
            <span><i class="bi bi-search me-2"></i>Discover the Area</span>
            <i class="bi" [ngClass]="{
      'bi-chevron-down': expandedSection !== 'discover',
      'bi-chevron-up': expandedSection === 'discover'
    }"></i>
        </h3>

        <!-- Contingut SEMPRE present, però plegat o desplegat amb classe -->
        <div class="accordion-content" [ngClass]="{ 'expanded': expandedSection === 'discover' }">
            @for (discover of tourDiscovers(); track discover.id_discover) {
            <img [src]="'http://localhost:3001' + discover.imatge_url" class="img-fluid mt-2 mb-3 w-100 rounded-1"
                [alt]="discover.titol" />
            <h5 class="mt-3">{{ discover.titol }}</h5>
            <p [class.clamp-text]="!isExpanded(discover.id_discover)">
                {{ discover.descripcio }}
            </p>
            <button class="btn btn-red rounded-1 p-1" (click)="toggleDiscover(discover.id_discover)">
                @if (isExpanded(discover.id_discover)) {
                Show less <i class="bi bi-arrow-up"></i>
                } @else {
                Read more <i class="bi bi-arrow-down"></i>
                }
            </button>
            <div class="section-divider"></div>
            }
        </div>


        <!-- LOCATIONS -->
        @if (tourLocations().length > 0) {
        <div class="mb-5">
            <h2><i class="bi bi-geo-alt-fill me-2"></i>Points of Interest</h2>
            @for (location of tourLocations(); track location.id_location) {
            <img [src]="'http://localhost:3001' + location.imatge_url" class="img-fluid mt-2 mb-2 w-100 rounded-1"
                [alt]="location.nom_location" />
            <h5 class="mt-3">{{ location.nom_location }}</h5>
            <p [class.clamp-text]="!isExpanded(location.id_location)">
                {{ location.descripcio }}
            </p>
            <button class="btn btn-red rounded-1 p-1" (click)="toggleDiscover(location.id_location)">
                @if (isExpanded(location.id_location)) {
                Show less <i class="bi bi-arrow-up"></i>
                } @else {
                Read more <i class="bi bi-arrow-down"></i>
                }
            </button>
            <div class="section-divider"></div>
            }
        </div>
        }

        <!-- HOTELS -->
        @if (tourHotels().length > 0) {
        <div class="mb-5">
            <h2><i class="bi bi-house-fill me-2"></i>Accommodation</h2>
            @for (hotel of tourHotels(); track hotel.id_hotel) {
            <img [src]="'http://localhost:3001' + hotel.imatge_url" class="img-fluid mt-2 mb-2 w-100 rounded-1"
                [alt]="hotel.nom_hotel" />

            <h5 class="mt-3">
                {{ hotel.nom_hotel }}
                @if (hotel.nits) {
                - {{ hotel.nits }} nights
                }
            </h5>

            <p [class.clamp-text]="!isExpanded(hotel.id_hotel)">
                {{ hotel.descripcio }}
            </p>
            @if (hotel.enllac) {
            <a [href]="hotel.enllac" target="_blank">Visit Hotel Website</a>
            <div class="section-divider"></div>
            }
            <button class="btn btn-red rounded-1 p-1" (click)="toggleDiscover(hotel.id_hotel)">
                @if (isExpanded(hotel.id_hotel)) {
                Show less <i class="bi bi-arrow-up"></i>
                } @else {
                Read more <i class="bi bi-arrow-down"></i>
                }
            </button>

            }
        </div>
        }
    </div>