<div class="container mt-4">
    <h2>Gestió del Tour</h2>
    <form [formGroup]="adminForm" (ngSubmit)="onSubmit()">
        <!-- Camps de la taula tours -->
        <h3>Dades del Tour</h3>
        <div class="mb-3">
            <label for="nom_tour">Nom del Tour:</label>
            <input type="text" id="nom_tour" formControlName="nom_tour" class="form-control" />
        </div>
        <div class="mb-3">
            <label for="imatge_tour">Imatge del Tour:</label>
            <input type="text" id="imatge_tour" formControlName="imatge_tour" class="form-control" />
        </div>
        <div class="mb-3">
            <label for="data_inici">Data d'Inici:</label>
            <input type="text" id="data_inici" formControlName="data_inici" class="form-control" />
        </div>
        <div class="mb-3">
            <label for="data_final">Data Final:</label>
            <input type="text" id="data_final" formControlName="data_final" class="form-control" />
        </div>
        <div class="mb-3">
            <label for="password">Contrasenya:</label>
            <input type="password" id="password" formControlName="password" class="form-control" />
        </div>

        <!-- Camps de la taula dies -->
        <h3>Dades dels Dies</h3>
        <div formArrayName="days">
            @for (day of days.controls; track day.value.numero_dia) {
            <div class="col-md-12 mb-4 card-container"> // continuar maquetant ////////////////////////
                <div [formGroupName]="days.controls.indexOf(day)" class="mb-3">
                    <label class="form-label">Número de Dia:</label>
                    <input type="text" formControlName="numero_dia" class="form-control" />

                    <label class="form-label">Data del Dia:</label>
                    <input type="text" formControlName="data_dia" class="form-control" />

                    <label class="form-label">Títol de l'Etapa:</label>
                    <input type="text" formControlName="titol_etapa" class="form-control" />

                    <label class="form-label">Imatge de l'Etapa:</label>
                    <input type="text" formControlName="imatge_etapa" class="form-control" />

                    <label class="form-label">Descripció:</label>
                    <textarea formControlName="descripcio" class="form-control"></textarea>

                    <label class="form-label">Coordenades Inici:</label>
                    <input type="text" formControlName="coordenades_inici" class="form-control" />

                    <label class="form-label">Coordenades Final:</label>
                    <input type="text" formControlName="coordenades_final" class="form-control" />
                </div>
            </div>
            }
            <button type="button" class="btn btn-secondary mt-3" (click)="addDay()">+ Afegir Dia</button>
        </div>

        <div formArrayName="users">
            @for (user of users.controls; track user.value.email) {
            <div [formGroupName]="users.controls.indexOf(user)" class="mb-3">
                <label class="form-label">Email:</label>
                <input type="email" formControlName="email" class="form-control" />
            </div>
            }
            <button type="button" class="btn btn-secondary mt-3" (click)="addUser()">+ Afegir Usuari</button>
        </div>

        <!-- Botó de Submit -->
        <button type="submit" class="btn btn-primary mt-3" [disabled]="!adminForm.valid">
            {{ tourId ? 'Actualitzar Tour' : 'Crear Tour' }}
        </button>
    </form>
</div>